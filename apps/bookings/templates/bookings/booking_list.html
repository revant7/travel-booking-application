{% extends "base.html" %}
{% block title %}My Bookings{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-6">My Bookings</h2>
<div class="space-y-4">
    {% for booking in bookings %}
    <div class="bg-white p-4 rounded shadow flex justify-between items-center">
        <div>
            <p class="font-semibold">{{ booking.travel_option.type|title }}: {{ booking.travel_option.source }} → {{booking.travel_option.destination }}</p>
            <p class="text-gray-600">Seats: {{ booking.number_of_seats }} | Total: ₹{{ booking.total_price }}</p>
            <p class="text-gray-600">Status: <span class="font-semibold">{{ booking.status|title }}</span></p>
        </div>
        {% if booking.status == "confirmed" %}
            {% if booking.travel_option.departure_datetime > now %}
                <a href="{% url 'booking_cancel' booking.booking_id %}" 
                   class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">
                   Cancel
                </a>
            {% else %}
                <a href="{% url 'booking_cancel' booking.booking_id %}"
                class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Cancel</a>
            {% endif %}
        {% endif %}
    </div>
    {% empty %}
    <p>You have no bookings yet.</p>
    {% endfor %}
</div>
{% endblock %}