<nav class="bg-blue-600 text-white shadow">
    <div class="container mx-auto px-4 flex justify-between items-center py-3">


        <a href="{% url 'home' %}" class="text-2xl font-bold tracking-wide hover:text-yellow-300">
            ‚úàÔ∏è TravelBooking
        </a>


        <div class="hidden md:flex space-x-6 font-medium">
            <a href="{% url 'home' %}" class="hover:text-yellow-300">Home</a>
            <a href="{% url 'travel_list' %}" class="hover:text-yellow-300">Travel Options</a>
            <a href="{% url 'booking_list' %}" class="hover:text-yellow-300">My Bookings</a>
            <a href="{% url 'about' %}" class="hover:text-yellow-300">About Us</a>
            <a href="{% url 'contact' %}" class="hover:text-yellow-300">Contact</a>
            <a href="{% url 'offers' %}" class="hover:text-yellow-300">Offers</a>
        </div>


        <div class="relative hidden md:block">
            {% if user.is_authenticated %}
            <div class="relative" id="user-menu-wrapper">
                <button id="user-menu-button" type="button"
                    class="flex items-center gap-2 bg-yellow-400 text-black px-4 py-2 rounded hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400"
                    aria-haspopup="true" aria-expanded="false">
                    üëã {{ user.username }}
                    <svg class="w-4 h-4 transition-transform" id="user-menu-caret" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                </button>

                <!-- Menu -->
                <div id="user-menu"
                    class="absolute right-0 mt-2 w-56 bg-white text-gray-800 rounded-md shadow-lg border hidden z-50">
                    <a href="{% url 'dashboard' %}" class="block px-4 py-2 hover:bg-gray-100">My Dashboard</a>
                    <a href="{% url 'profile' %}" class="block px-4 py-2 hover:bg-gray-100">My Profile</a>
                    <a href="{% url 'booking_list' %}" class="block px-4 py-2 hover:bg-gray-100">My Bookings</a>
                    <a href="{% url 'logout' %}"
                        class="block px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded-b-md">Logout</a>
                </div>
            </div>
            {% else %}
            <a href="{% url 'login' %}"
                class="bg-white text-blue-600 px-3 py-1 rounded hover:bg-gray-200 transition">Login</a>
            <a href="{% url 'register' %}"
                class="ml-2 bg-yellow-400 text-black px-3 py-1 rounded hover:bg-yellow-500 transition">Sign Up</a>
            {% endif %}
        </div>


        <div class="md:hidden">
            <button id="mobile-menu-button" class="focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>

    </div>


    <div id="mobile-menu" class="hidden md:hidden bg-blue-700">
        <a href="{% url 'home' %}" class="block px-4 py-2 hover:bg-blue-800">Home</a>
        <a href="{% url 'travel_list' %}" class="block px-4 py-2 hover:bg-blue-800">Travel Options</a>
        <a href="{% url 'booking_list' %}" class="block px-4 py-2 hover:bg-blue-800">My Bookings</a>
        <a href="{% url 'about' %}" class="block px-4 py-2 hover:bg-blue-800">About Us</a>
        <a href="{% url 'contact' %}" class="block px-4 py-2 hover:bg-blue-800">Contact</a>
        <a href="{% url 'offers' %}" class="block px-4 py-2 hover:bg-blue-800">Offers</a>

        {% if user.is_authenticated %}
        <a href="{% url 'dashboard' %}" class="block px-4 py-2 hover:bg-blue-800">My Dashboard</a>
        <a href="{% url 'profile' %}" class="block px-4 py-2 hover:bg-blue-800">My Profile</a>
        <a href="{% url 'logout' %}" class="block px-4 py-2 bg-red-500 text-white hover:bg-red-600">Logout</a>
        {% else %}
        <a href="{% url 'login' %}" class="block px-4 py-2 bg-white text-blue-600 hover:bg-gray-200">Login</a>
        <a href="{% url 'register' %}" class="block px-4 py-2 bg-yellow-400 text-black hover:bg-yellow-500">Sign Up</a>
        {% endif %}
    </div>
</nav>


<script>
    const btn = document.getElementById("mobile-menu-button");
    const menu = document.getElementById("mobile-menu");

    btn.addEventListener("click", () => {
        menu.classList.toggle("hidden");
    });

    (function () {
        const wrapper = document.getElementById('user-menu-wrapper');
        if (!wrapper) return; // not logged in

        const btn = document.getElementById('user-menu-button');
        const menu = document.getElementById('user-menu');
        const caret = document.getElementById('user-menu-caret');

        function openMenu() {
            menu.classList.remove('hidden');
            btn.setAttribute('aria-expanded', 'true');
            if (caret) caret.classList.add('rotate-180');
        }
        function closeMenu() {
            menu.classList.add('hidden');
            btn.setAttribute('aria-expanded', 'false');
            if (caret) caret.classList.remove('rotate-180');
        }
        function toggleMenu(e) {
            e.stopPropagation();
            if (menu.classList.contains('hidden')) openMenu(); else closeMenu();
        }

        btn.addEventListener('click', toggleMenu);
        document.addEventListener('click', (e) => { if (!wrapper.contains(e.target)) closeMenu(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMenu(); });
    })();


</script>